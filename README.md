# scmdb
Tool to better integrate relational DB with version control systems. 
Executes SQL scripts to keep DB in syncs with current source code version when switching back and force between branches.
Maintains directory of all DB object DDLs and automatically updates it when object modified with new script created by developer.

We assume developers implementing SQL scripts to upgrade DB and additionally rollback script - to move DB to the initial state.
Ideally each upgrade script should have it's rollback counterpart.
Following is name convention for script files:
```
<script oder num>_<short description>.sql
<script oder num>_<short description>_rollback.sql
```
Additionally scripts ending with _user.sql, _rpt.sql, _pkg.sql will be executed in it's own DB schema (see below)


### Supported command line options:
* ```--owner-schema=<user>/<password>@<db_address>:<db_port>:<db_name>```
* ```--user-schema=<user>/<password>```
* ```--rpt-schema=<user>/<password>```
* ```--pkg-schema=<user>/<password>```

When passwords for all schemas are the same (may be common for local dev env), only --owner-schema parameter may be used, other schema names will be generated by adding _user, _rpt and _pkg prefixes to the owner schema

* ```--scripts-dir=<location of the directory with DB scripts>```
* ```--gen-ddl``` generate DDL for objects created with new scripts
* ```--exec execute``` new scripts
* ```--omit-changed``` do not check for sciprt changes. Script modifications detection is based on hash code calc, omiting this procedure may improove perfomance
* ```--ignore-errors``` do not stop on errors 
* ```--no-color``` do not color output

### Usage Scenarious
1. Execute new scripts in local dev env:

```java.exe -jar scmdb.jar --owner-schema=vqs_p01_epm/vepm@localhost:1521:orcldb --scripts-dir=./db/scripts --exec```
